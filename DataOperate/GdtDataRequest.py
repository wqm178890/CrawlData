# -*- coding:utf-8 -*-

import urllib
import urllib2
import hashlib
import json
import ssl
import chardet, time

def get_google_data(days=1):
    localtime = time.localtime(time.time() - 24*60*60*days)
    str_data = time.strftime("%Y%m%d", localtime)    
    ssl._create_default_https_context = ssl._create_unverified_context
    values = {}
    values['t'] = "ADMOB_NETWORK"
    values['rs'] = "{\"2\":[{\"1\":3,\"2\":%s,\"3\":%s}],\"3\":[1,4],\"4\":\"USD\"}"%(str_data, str_data)
    values['cc'] = "USD"
    textvalues = "reportType=5&operatorName=&startDate=2017-07-05&endDate=2017-07-05&memberId=2772636960&mediaId=1105724611%2C1105731935%2C1105732039%2C1105732081%2C1105732243%2C1105732275%2C1105732345%2C1105787477%2C1105805872%2C1105805968%2C1105806184%2C1105806242%2C1105806266%2C1105840187%2C1105840193%2C1105863479%2C1105866673%2C1105868313%2C1105875483%2C1105877889%2C1105879209%2C1105879989%2C1105880161%2C1105880305%2C1105880419%2C1105884833%2C1105884961%2C1105884973%2C1105884997%2C1105885011%2C1105886751%2C1105886999%2C1105887099%2C1105894287%2C1105894421%2C1105894525%2C1105894607%2C1105894617%2C1105894631%2C1105894633%2C1105894639%2C1105894647%2C1105894649%2C1105895743%2C1105895777%2C1105895783%2C1105895797%2C1105895993%2C1105896037%2C1105896059%2C1105896069%2C1105896259%2C1105896415%2C1105896451%2C1105896469%2C1105896531%2C1105896565%2C1105896593%2C1105896701%2C1105896725%2C1105896891%2C1105896901%2C1105896923%2C1105896933%2C1105896999%2C1105898499%2C1105898613%2C1105898641%2C1105898679%2C1105898757%2C1105898783%2C1105898885%2C1105898903%2C1105898919%2C1105898921%2C1105898923%2C1105898955%2C1105898957%2C1105899001%2C1105899013%2C1105899041%2C1105901513%2C1105901551%2C1105901871%2C1105901903%2C1105901929%2C1105901967%2C1105902065%2C1105902213%2C1105902401%2C1105902463%2C1105902549%2C1105902763%2C1105902909%2C1105902947%2C1105902971%2C1105902989%2C1105903121%2C1105903963%2C1105904217%2C1105904467%2C1105904883%2C1105905199%2C1105905373%2C1105905465%2C1105905719%2C1105906015%2C1105906093%2C1105906187%2C1105906209%2C1105906215%2C1105906337%2C1105913661%2C1105913835%2C1105913909%2C1105913983%2C1105914061%2C1105914133%2C1105914159%2C1105914187%2C1105914215%2C1105914319%2C1105914397%2C1105914655%2C1105914783%2C1105914910%2C1105914979%2C1105915079%2C1105915167%2C1105915235%2C1105915285%2C1105915303%2C1105915325%2C1105915409%2C1105915445%2C1105915491%2C1105915517%2C1105915547%2C1105915567%2C1105915609%2C1105915619%2C1105915637%2C1105915655%2C1105915661%2C1105915709%2C1105915735%2C1105916041%2C1105916303%2C1105916383%2C1105916393%2C1105916441%2C1105916563%2C1105916609%2C1105916925%2C1105916995%2C1105917139%2C1105917331%2C1105917537%2C1105917549%2C1105917613%2C1105917645%2C1105917657%2C1105917689%2C1105917743%2C1105917769%2C1105917789%2C1105917811%2C1105917827%2C1105917839%2C1105917851%2C1105917869%2C1105917877%2C1105917881%2C1105917885%2C1105917891%2C1105917893%2C1105917907%2C1105917911%2C1105918019%2C1105918167%2C1105918233%2C1105918489%2C1105918521%2C1105918745%2C1105918831%2C1105918969%2C1105919027%2C1105919187%2C1105919289%2C1105919353%2C1105919425%2C1105919563%2C1105919613%2C1105919655%2C1105919745%2C1105919755%2C1105919761%2C1105919793%2C1105919799%2C1105919807%2C1105919811%2C1105919817%2C1105919827%2C1105919907%2C1105919941%2C1105919957%2C1105919999%2C1105920049%2C1105920085%2C1105920123%2C1105920143%2C1105920227%2C1105920245%2C1105920263%2C1105920331%2C1105920423%2C1105920505%2C1105920531%2C1105920571%2C1105920593%2C1105920771%2C1105920785%2C1105920803%2C1105920845%2C1105920853%2C1105921235%2C1105921255%2C1105921267%2C1105921341%2C1105921383%2C1105921399%2C1105921425%2C1105921433%2C1105921445%2C1105921451%2C1105921459%2C1105921517%2C1105922033%2C1105923569%2C1105923589%2C1105923745%2C1105923755%2C1105923839%2C1105923883%2C1105923947%2C1105924341%2C1105925237%2C1105925587%2C1105925719%2C1105925827%2C1105926783%2C1105927009%2C1105927077%2C1105927193%2C1105927899%2C1105928195%2C1105928229%2C1105928355%2C1105928361%2C1105928381%2C1105928487%2C1105928507%2C1105929091%2C1105929113%2C1105938322%2C1105938882%2C1105939186%2C1105942042%2C1105943034%2C1105943614%2C1105946882%2C1105946996%2C1105947228%2C1105948860%2C1105952418%2C1105952600%2C1105952958%2C1105954704%2C1105955574%2C1105956432%2C1105958250%2C1105959302%2C1105959650%2C1105959704%2C1105959790%2C1105959826%2C1105960786%2C1105961660%2C1105961956%2C1105962106%2C1105962122%2C1105962144%2C1105969692%2C1105969738%2C1105969756%2C1105970202%2C1105970490%2C1105970584%2C1105970764%2C1105970784%2C1105970790%2C1105970820%2C1105970824%2C1105970840%2C1105970898%2C1105971016%2C1105971018%2C1105971046%2C1105971060%2C1105971226%2C1105971246%2C1105971310%2C1105971418%2C1105971424%2C1105971438%2C1105971458%2C1105971486%2C1105971490%2C1105971550%2C1105971574%2C1105971634%2C1105971690%2C1105971888%2C1105971902%2C1105971912%2C1105971950%2C1105972694%2C1105972744%2C1105973168%2C1105973436%2C1105973488%2C1105973538%2C1105973670%2C1105973772%2C1105973820%2C1105973978%2C1105974034%2C1105974038%2C1105974044%2C1105974050%2C1105974052%2C1105974058%2C1105974062%2C1105974064%2C1105974088%2C1105974090%2C1105974094%2C1105974098%2C1105974126%2C1105974222%2C1105974274%2C1105977080%2C1105977192%2C1105977668%2C1105977734%2C1105977844%2C1105977892%2C1105978026%2C1105978056%2C1105978090%2C1105978132%2C1105979184%2C1105979284%2C1105979378%2C1105979446%2C1105979660%2C1105980248%2C1105980276%2C1105980388%2C1105980406%2C1105980422%2C1105980442%2C1105980490%2C1105980542%2C1105980560%2C1105980584%2C1105980784%2C1105980802%2C1105980830%2C1105980860%2C1105980946%2C1105980984%2C1105981048%2C1105981104%2C1105981418%2C1105981448%2C1105989278%2C1105989874%2C1105990034%2C1105990082%2C1105990582%2C1105990612%2C1105990644%2C1105990694%2C1105990760%2C1105990800%2C1105990810%2C1105990822%2C1105990864%2C1105990878%2C1105990880%2C1105990884%2C1105990888%2C1105991182%2C1105991398%2C1105991474%2C1105991608%2C1105991670%2C1105991686%2C1105991740%2C1105991786%2C1105991976%2C1105992076%2C1105992172%2C1105992398%2C1105992526%2C1105992588%2C1105992848%2C1105992862%2C1105992888%2C1105992898%2C1105992978%2C1105993040%2C1105993076%2C1105993094%2C1105993096%2C1105993098%2C1105993100%2C1105993102%2C1105993190%2C1105993218%2C1105993274%2C1105993474%2C1105993632%2C1105993958%2C1105994196%2C1105994452%2C1105994832%2C1105994892%2C1105994964%2C1105994986%2C1105995038%2C1105995086%2C1105995104%2C1105995116%2C1105995180%2C1105995196%2C1105995220%2C1105995246%2C1105995320%2C1105995590%2C1105995614%2C1105995694%2C1105995728%2C1105995806%2C1105995832%2C1105995892%2C1105995986%2C1105996152%2C1105996174%2C1105996182%2C1105996194%2C1105996200%2C1105996216%2C1105996218%2C1105996254%2C1105996576%2C1105996594%2C1105996612%2C1105996642%2C1105996666%2C1105996686%2C1105996776%2C1105996820%2C1105996838%2C1105996940%2C1105997038%2C1105997144%2C1105997228%2C1105999138%2C1105999152%2C1105999166%2C1105999672%2C1106000796%2C1106000858%2C1106000960%2C1106002462%2C1106002496%2C1106003588%2C1106003646%2C1106003682%2C1106003798%2C1106003826%2C1106003856%2C1106003954%2C1106003992%2C1106004080%2C1106004112%2C1106004538%2C1106004636%2C1106004692%2C1106005038%2C1106005126%2C1106107677%2C1106107701%2C1106107709%2C1106107757%2C1106132673%2C1106150335%2C1106182920%2C1106182922%2C1106182956%2C1106182972%2C1106182988%2C1106183002%2C1106183026&adShowTypeValue=&allianceTypeValue=1&placementId=&columns=102%2C103%2C104%2C105%2C106%2C201%2C202%2C203&operatorId=0"
    #data = urllib.urlencode(textvalues)
    url = 'http://dev.e.qq.com/dev/adnetwork/reportdownload'
    
    user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_1) AppleWebKit/602.2.14 (KHTML, like Gecko) Version/10.0.1 Safari/602.2.14"
    cookie = "JSESSIONID=55F599E12F91ED3478479113B2AB86CA.noname; pgv_pvi=3477279744; pgv_pvid=3133813789; RK=gadLo/GK7t; pgv_si=s2023274496; gdt_refer=e.qq.com; gdt_full_refer=http%3A%2F%2Fe.qq.com%2F; gdt_original_refer=e.qq.com; gdt_original_full_refer=http%3A%2F%2Fe.qq.com%2F; tsa_pgv_ssid=tsassid__1499305960946_239315775; portalversion=new; gr_user_id=06a2e8f6-e739-4e67-a62e-07a57fa860fe; __root_domain_v=.e.qq.com; _qddaz=QD.b36ktf.9tz11o.j4rs23mv; pt_local_token=2-; dm_cookie=version=new&log_type=internal_click&ssid=tsassid__1499305960946_239315775&pvid=3133813789&qq=&loadtime=4234&url=http%3A%2F%2Fe.qq.com%2Fads&gdt_refer=e.qq.com&gdt_full_refer=http%3A%2F%2Fe.qq.com%2F&gdt_original_refer=e.qq.com&gdt_original_full_refer=http%3A%2F%2Fe.qq.com%2F&gdt_from=; site_type=new; hottag=; hottagtype=; pgv_info=ssid=s4752615472; _qpsvr_localtk=0.40133795281872153; ptui_loginuin=2772636960@qq.com; pt2gguin=o2772636960; uin=o2772636960; skey=@AGozD9kqe; ptisp=cnc; ptcz=d2be323ae0d489fc892f30dcf1ab54ed50971dfb59f90ed79da51333414bf638"
    Content_Type = "application/x-www-form-urlencoded"
    headers = {
        "Cookie": cookie,
        "User-Agent": user_agent,
        "Content-Type": Content_Type,
        "Referer": "http://dev.e.qq.com/dev/",
        "Accept-Language": "zh-CN",
        "Accept-Encoding": "gzip,deflate",
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
        "DNT": 1
    }
    
    request = urllib2.Request(url,data=textvalues, headers=headers)
    response = urllib2.urlopen(request)
    json_data = response.read()
    data = unicode(json_data, "utf-16")  
   # print data
    data_list = []
    row = 0
    #for i in data.split('\n'):
        #if row == 0:
            #row += 1
            #continue
        #if len(i) > 0:
            #lists = i.split('\t')
            #data_list.append(lists)
        #row += 1
    #return data_list

print get_google_data()





